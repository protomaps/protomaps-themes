import{r as kt,d as Kn,c as U,p as Jn,a as G,b as Ie,e as Wn,l as Zn,t as B,i as T,N as Yn,S as xe,f as ve,F as Ue,g as ot,o as Xn,V as Qn,h as er,u as Mt,s as tr}from"./utils-CbEMBHFK.js";import{l as Ot,x as Bt,V as nr,n as rr,m as re,a as sr,S as ir}from"./index-BF-vTCmA.js";var Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ae={exports:{}};Ae.exports;var At;function ar(){return At||(At=1,function(n,a){var c=200,i="__lodash_hash_undefined__",d=1,b=2,_=9007199254740991,x="[object Arguments]",M="[object Array]",D="[object AsyncFunction]",W="[object Boolean]",Z="[object Date]",ee="[object Error]",j="[object Function]",q="[object GeneratorFunction]",V="[object Map]",R="[object Number]",se="[object Null]",g="[object Object]",f="[object Promise]",S="[object Proxy]",E="[object RegExp]",O="[object Set]",r="[object String]",o="[object Symbol]",l="[object Undefined]",u="[object WeakMap]",h="[object ArrayBuffer]",w="[object DataView]",$="[object Float32Array]",te="[object Float64Array]",v="[object Int8Array]",P="[object Int16Array]",k="[object Int32Array]",K="[object Uint8Array]",be="[object Uint8ClampedArray]",Le="[object Uint16Array]",Ke="[object Uint32Array]",Ee=/[\\^$.*+?()[\]{}|]/g,ke=/^\[object .+?Constructor\]$/,Je=/^(?:0|[1-9]\d*)$/,C={};C[$]=C[te]=C[v]=C[P]=C[k]=C[K]=C[be]=C[Le]=C[Ke]=!0,C[x]=C[M]=C[h]=C[W]=C[w]=C[Z]=C[ee]=C[j]=C[V]=C[R]=C[g]=C[E]=C[O]=C[r]=C[u]=!1;var Se=typeof Ve=="object"&&Ve&&Ve.Object===Object&&Ve,Be=typeof self=="object"&&self&&self.Object===Object&&self,Y=Se||Be||Function("return this")(),Ce=a&&!a.nodeType&&a,ye=Ce&&!0&&n&&!n.nodeType&&n,ce=ye&&ye.exports===Ce,y=ce&&Se.process,F=function(){try{return y&&y.binding&&y.binding("util")}catch{}}(),ae=F&&F.isTypedArray;function je(e,t){for(var s=-1,p=e==null?0:e.length,A=0,m=[];++s<p;){var L=e[s];t(L,s,e)&&(m[A++]=L)}return m}function Rt(e,t){for(var s=-1,p=t.length,A=e.length;++s<p;)e[A+s]=t[s];return e}function Nt(e,t){for(var s=-1,p=e==null?0:e.length;++s<p;)if(t(e[s],s,e))return!0;return!1}function Ht(e,t){for(var s=-1,p=Array(e);++s<e;)p[s]=t(s);return p}function Dt(e){return function(t){return e(t)}}function Ft(e,t){return e.has(t)}function zt(e,t){return e==null?void 0:e[t]}function Gt(e){var t=-1,s=Array(e.size);return e.forEach(function(p,A){s[++t]=[A,p]}),s}function qt(e,t){return function(s){return e(t(s))}}function Vt(e){var t=-1,s=Array(e.size);return e.forEach(function(p){s[++t]=p}),s}var Ut=Array.prototype,Kt=Function.prototype,Re=Object.prototype,We=Y["__core-js_shared__"],ct=Kt.toString,ie=Re.hasOwnProperty,ut=function(){var e=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pt=Re.toString,Jt=RegExp("^"+ct.call(ie).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ft=ce?Y.Buffer:void 0,Ne=Y.Symbol,dt=Y.Uint8Array,ht=Re.propertyIsEnumerable,Wt=Ut.splice,de=Ne?Ne.toStringTag:void 0,gt=Object.getOwnPropertySymbols,Zt=ft?ft.isBuffer:void 0,Yt=qt(Object.keys,Object),Ze=we(Y,"DataView"),$e=we(Y,"Map"),Ye=we(Y,"Promise"),Xe=we(Y,"Set"),Qe=we(Y,"WeakMap"),Te=we(Object,"create"),Xt=me(Ze),Qt=me($e),en=me(Ye),tn=me(Xe),nn=me(Qe),mt=Ne?Ne.prototype:void 0,et=mt?mt.valueOf:void 0;function he(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var p=e[t];this.set(p[0],p[1])}}function rn(){this.__data__=Te?Te(null):{},this.size=0}function sn(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function an(e){var t=this.__data__;if(Te){var s=t[e];return s===i?void 0:s}return ie.call(t,e)?t[e]:void 0}function on(e){var t=this.__data__;return Te?t[e]!==void 0:ie.call(t,e)}function ln(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=Te&&t===void 0?i:t,this}he.prototype.clear=rn,he.prototype.delete=sn,he.prototype.get=an,he.prototype.has=on,he.prototype.set=ln;function oe(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var p=e[t];this.set(p[0],p[1])}}function cn(){this.__data__=[],this.size=0}function un(e){var t=this.__data__,s=De(t,e);if(s<0)return!1;var p=t.length-1;return s==p?t.pop():Wt.call(t,s,1),--this.size,!0}function pn(e){var t=this.__data__,s=De(t,e);return s<0?void 0:t[s][1]}function fn(e){return De(this.__data__,e)>-1}function dn(e,t){var s=this.__data__,p=De(s,e);return p<0?(++this.size,s.push([e,t])):s[p][1]=t,this}oe.prototype.clear=cn,oe.prototype.delete=un,oe.prototype.get=pn,oe.prototype.has=fn,oe.prototype.set=dn;function ge(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var p=e[t];this.set(p[0],p[1])}}function hn(){this.size=0,this.__data__={hash:new he,map:new($e||oe),string:new he}}function gn(e){var t=Fe(this,e).delete(e);return this.size-=t?1:0,t}function mn(e){return Fe(this,e).get(e)}function _n(e){return Fe(this,e).has(e)}function vn(e,t){var s=Fe(this,e),p=s.size;return s.set(e,t),this.size+=s.size==p?0:1,this}ge.prototype.clear=hn,ge.prototype.delete=gn,ge.prototype.get=mn,ge.prototype.has=_n,ge.prototype.set=vn;function He(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new ge;++t<s;)this.add(e[t])}function bn(e){return this.__data__.set(e,i),this}function yn(e){return this.__data__.has(e)}He.prototype.add=He.prototype.push=bn,He.prototype.has=yn;function ue(e){var t=this.__data__=new oe(e);this.size=t.size}function wn(){this.__data__=new oe,this.size=0}function xn(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function Sn(e){return this.__data__.get(e)}function Cn(e){return this.__data__.has(e)}function $n(e,t){var s=this.__data__;if(s instanceof oe){var p=s.__data__;if(!$e||p.length<c-1)return p.push([e,t]),this.size=++s.size,this;s=this.__data__=new ge(p)}return s.set(e,t),this.size=s.size,this}ue.prototype.clear=wn,ue.prototype.delete=xn,ue.prototype.get=Sn,ue.prototype.has=Cn,ue.prototype.set=$n;function Tn(e,t){var s=ze(e),p=!s&&Fn(e),A=!s&&!p&&tt(e),m=!s&&!p&&!A&&$t(e),L=s||p||A||m,N=L?Ht(e.length,String):[],H=N.length;for(var I in e)ie.call(e,I)&&!(L&&(I=="length"||A&&(I=="offset"||I=="parent")||m&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||jn(I,H)))&&N.push(I);return N}function De(e,t){for(var s=e.length;s--;)if(wt(e[s][0],t))return s;return-1}function Mn(e,t,s){var p=t(e);return ze(e)?p:Rt(p,s(e))}function Me(e){return e==null?e===void 0?l:se:de&&de in Object(e)?kn(e):Dn(e)}function _t(e){return Oe(e)&&Me(e)==x}function vt(e,t,s,p,A){return e===t?!0:e==null||t==null||!Oe(e)&&!Oe(t)?e!==e&&t!==t:On(e,t,s,p,vt,A)}function On(e,t,s,p,A,m){var L=ze(e),N=ze(t),H=L?M:pe(e),I=N?M:pe(t);H=H==x?g:H,I=I==x?g:I;var J=H==g,ne=I==g,z=H==I;if(z&&tt(e)){if(!tt(t))return!1;L=!0,J=!1}if(z&&!J)return m||(m=new ue),L||$t(e)?bt(e,t,s,p,A,m):Ln(e,t,H,s,p,A,m);if(!(s&d)){var X=J&&ie.call(e,"__wrapped__"),Q=ne&&ie.call(t,"__wrapped__");if(X||Q){var fe=X?e.value():e,le=Q?t.value():t;return m||(m=new ue),A(fe,le,s,p,m)}}return z?(m||(m=new ue),En(e,t,s,p,A,m)):!1}function An(e){if(!Ct(e)||Nn(e))return!1;var t=xt(e)?Jt:ke;return t.test(me(e))}function Pn(e){return Oe(e)&&St(e.length)&&!!C[Me(e)]}function In(e){if(!Hn(e))return Yt(e);var t=[];for(var s in Object(e))ie.call(e,s)&&s!="constructor"&&t.push(s);return t}function bt(e,t,s,p,A,m){var L=s&d,N=e.length,H=t.length;if(N!=H&&!(L&&H>N))return!1;var I=m.get(e);if(I&&m.get(t))return I==t;var J=-1,ne=!0,z=s&b?new He:void 0;for(m.set(e,t),m.set(t,e);++J<N;){var X=e[J],Q=t[J];if(p)var fe=L?p(Q,X,J,t,e,m):p(X,Q,J,e,t,m);if(fe!==void 0){if(fe)continue;ne=!1;break}if(z){if(!Nt(t,function(le,_e){if(!Ft(z,_e)&&(X===le||A(X,le,s,p,m)))return z.push(_e)})){ne=!1;break}}else if(!(X===Q||A(X,Q,s,p,m))){ne=!1;break}}return m.delete(e),m.delete(t),ne}function Ln(e,t,s,p,A,m,L){switch(s){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case h:return!(e.byteLength!=t.byteLength||!m(new dt(e),new dt(t)));case W:case Z:case R:return wt(+e,+t);case ee:return e.name==t.name&&e.message==t.message;case E:case r:return e==t+"";case V:var N=Gt;case O:var H=p&d;if(N||(N=Vt),e.size!=t.size&&!H)return!1;var I=L.get(e);if(I)return I==t;p|=b,L.set(e,t);var J=bt(N(e),N(t),p,A,m,L);return L.delete(e),J;case o:if(et)return et.call(e)==et.call(t)}return!1}function En(e,t,s,p,A,m){var L=s&d,N=yt(e),H=N.length,I=yt(t),J=I.length;if(H!=J&&!L)return!1;for(var ne=H;ne--;){var z=N[ne];if(!(L?z in t:ie.call(t,z)))return!1}var X=m.get(e);if(X&&m.get(t))return X==t;var Q=!0;m.set(e,t),m.set(t,e);for(var fe=L;++ne<H;){z=N[ne];var le=e[z],_e=t[z];if(p)var Tt=L?p(_e,le,z,t,e,m):p(le,_e,z,e,t,m);if(!(Tt===void 0?le===_e||A(le,_e,s,p,m):Tt)){Q=!1;break}fe||(fe=z=="constructor")}if(Q&&!fe){var Ge=e.constructor,qe=t.constructor;Ge!=qe&&"constructor"in e&&"constructor"in t&&!(typeof Ge=="function"&&Ge instanceof Ge&&typeof qe=="function"&&qe instanceof qe)&&(Q=!1)}return m.delete(e),m.delete(t),Q}function yt(e){return Mn(e,qn,Bn)}function Fe(e,t){var s=e.__data__;return Rn(t)?s[typeof t=="string"?"string":"hash"]:s.map}function we(e,t){var s=zt(e,t);return An(s)?s:void 0}function kn(e){var t=ie.call(e,de),s=e[de];try{e[de]=void 0;var p=!0}catch{}var A=pt.call(e);return p&&(t?e[de]=s:delete e[de]),A}var Bn=gt?function(e){return e==null?[]:(e=Object(e),je(gt(e),function(t){return ht.call(e,t)}))}:Vn,pe=Me;(Ze&&pe(new Ze(new ArrayBuffer(1)))!=w||$e&&pe(new $e)!=V||Ye&&pe(Ye.resolve())!=f||Xe&&pe(new Xe)!=O||Qe&&pe(new Qe)!=u)&&(pe=function(e){var t=Me(e),s=t==g?e.constructor:void 0,p=s?me(s):"";if(p)switch(p){case Xt:return w;case Qt:return V;case en:return f;case tn:return O;case nn:return u}return t});function jn(e,t){return t=t??_,!!t&&(typeof e=="number"||Je.test(e))&&e>-1&&e%1==0&&e<t}function Rn(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Nn(e){return!!ut&&ut in e}function Hn(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||Re;return e===s}function Dn(e){return pt.call(e)}function me(e){if(e!=null){try{return ct.call(e)}catch{}try{return e+""}catch{}}return""}function wt(e,t){return e===t||e!==e&&t!==t}var Fn=_t(function(){return arguments}())?_t:function(e){return Oe(e)&&ie.call(e,"callee")&&!ht.call(e,"callee")},ze=Array.isArray;function zn(e){return e!=null&&St(e.length)&&!xt(e)}var tt=Zt||Un;function Gn(e,t){return vt(e,t)}function xt(e){if(!Ct(e))return!1;var t=Me(e);return t==j||t==q||t==D||t==S}function St(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_}function Ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Oe(e){return e!=null&&typeof e=="object"}var $t=ae?Dt(ae):Pn;function qn(e){return zn(e)?Tn(e):In(e)}function Vn(){return[]}function Un(){return!1}n.exports=Gn}(Ae,Ae.exports)),Ae.exports}var or=ar(),lr=jt(or);function rt(n,a,c){const i={id:[a,c,"circle"].join("_"),source:a,type:"circle",paint:{"circle-color":n,"circle-radius":2},filter:["==","$type","Point"]};return c&&(i["source-layer"]=c),i}function st(n,a,c,i){const d={id:[c,i,"polygon"].join("_"),source:c,type:"fill",paint:{"fill-color":n,"fill-antialias":!0,"fill-outline-color":n},filter:["==","$type","Polygon"]};return i&&(d["source-layer"]=i),d}function it(n,a,c){const i={id:[a,c,"line"].join("_"),source:a,layout:{"line-join":"round","line-cap":"round"},type:"line",paint:{"line-color":n},filter:["==","$type","LineString"]};return c&&(i["source-layer"]=c),i}function cr(n,a){const c=[],i=[],d=[];function b(_){return{circle:a(_,.8),line:a(_,.6),polygon:a(_,.3),polygonOutline:a(_,.6),default:a(_,1)}}return Object.keys(n).forEach(_=>{const x=n[_];if(!x||x.length===0){const M=b(_);i.push(rt(M.circle,_)),d.push(it(M.line,_)),c.push(st(M.polygon,M.polygonOutline,_))}else x.forEach(M=>{const D=b(M);i.push(rt(D.circle,_,M)),d.push(it(D.line,_,M)),c.push(st(D.polygon,D.polygonOutline,_,M))})}),c.concat(d).concat(i)}function ur(n,a,c){c=Object.assign({backgroundColor:"#fff"},c);const i={id:"background",type:"background",paint:{"background-color":c.backgroundColor}},d={};return Object.keys(n.sources).forEach(b=>{const _=n.sources[b];(_.type==="vector"||_.type==="geojson")&&(d[b]=_)}),Object.assign(n,{layers:[i].concat(a),sources:d})}var Pt={polygonLayer:st,lineLayer:it,circleLayer:rt,generateInspectStyle:ur,generateColoredLayers:cr};class pr{constructor(a){a=Object.assign({show:!0,onToggle(){}},a),this._btn=this.createButton(),this._btn.onclick=a.onToggle,this.elem=this.createContainer(this._btn,a.show)}createButton(){const a=document.createElement("button");return a.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect",a.type="button",a.title="Toggle Inspect",a.setAttribute("aria-label","Toggle Inspect"),a}createContainer(a,c){const i=document.createElement("div");return i.className="maplibregl-ctrl maplibregl-ctrl-group",i.appendChild(a),c||(i.style.display="none"),i}setInspectIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-inspect"}setMapIcon(){this._btn.className="maplibregl-ctrl-icon maplibregl-ctrl-map"}}function fr(n){return typeof n>"u"||n===null?n:n instanceof Date?n.toLocaleString():typeof n=="object"||typeof n=="number"||typeof n=="string"?n.toString():n}function nt(n,a){return`<div class="maplibregl-inspect_property"><div class="maplibregl-inspect_property-name">${n}</div><div class="maplibregl-inspect_property-value">${fr(a)}</div></div>`}function dr(n){return`<div class="maplibregl-inspect_layer">${n}</div>`}function hr(n){const a=dr(n.layer["source-layer"]||n.layer.source),c=nt("$id",n.id),i=nt("$type",n.geometry.type),d=Object.keys(n.properties).map(b=>nt(b,n.properties[b]));return[a,c,i].concat(d).join("")}function gr(n){return n.map(a=>`<div class="maplibregl-inspect_feature">${hr(a)}</div>`).join("")}function mr(n){return`<div class="maplibregl-inspect_popup">${gr(n)}</div>`}var Pe={exports:{}},_r=Pe.exports,It;function vr(){return It||(It=1,function(n,a){(function(c,i){{var d=i();n.exports&&(a=n.exports=d),a.randomColor=d}})(_r,function(){var c=null,i={};se();var d=[],b=function(r){if(r=r||{},r.seed!==void 0&&r.seed!==null&&r.seed===parseInt(r.seed,10))c=r.seed;else if(typeof r.seed=="string")c=E(r.seed);else{if(r.seed!==void 0&&r.seed!==null)throw new TypeError("The seed value must be an integer or string");c=null}var o,l,u;if(r.count!==null&&r.count!==void 0){for(var h=r.count,w=[],$=0;$<r.count;$++)d.push(!1);for(r.count=null;h>w.length;){var te=b(r);c!==null&&(r.seed=c),w.push(te)}return r.count=h,w}return o=_(r),l=x(o,r),u=M(o,l,r),D([o,l,u],r)};function _(r){if(d.length>0){var o=O(r.hue),l=q(o),u=(o[1]-o[0])/d.length,h=parseInt((l-o[0])/u);d[h]===!0?h=(h+2)%d.length:d[h]=!0;var w=(o[0]+h*u)%359,$=(o[0]+(h+1)*u)%359;return o=[w,$],l=q(o),l<0&&(l=360+l),l}else{var o=Z(r.hue);return l=q(o),l<0&&(l=360+l),l}}function x(r,o){if(o.hue==="monochrome")return 0;if(o.luminosity==="random")return q([0,100]);var l=ee(r),u=l[0],h=l[1];switch(o.luminosity){case"bright":u=55;break;case"dark":u=h-10;break;case"light":h=55;break}return q([u,h])}function M(r,o,l){var u=W(r,o),h=100;switch(l.luminosity){case"dark":h=u+20;break;case"light":u=(h+u)/2;break;case"random":u=0,h=100;break}return q([u,h])}function D(r,o){switch(o.format){case"hsvArray":return r;case"hslArray":return S(r);case"hsl":var l=S(r);return"hsl("+l[0]+", "+l[1]+"%, "+l[2]+"%)";case"hsla":var u=S(r),$=o.alpha||Math.random();return"hsla("+u[0]+", "+u[1]+"%, "+u[2]+"%, "+$+")";case"rgbArray":return g(r);case"rgb":var h=g(r);return"rgb("+h.join(", ")+")";case"rgba":var w=g(r),$=o.alpha||Math.random();return"rgba("+w.join(", ")+", "+$+")";default:return V(r)}}function W(r,o){for(var l=j(r).lowerBounds,u=0;u<l.length-1;u++){var h=l[u][0],w=l[u][1],$=l[u+1][0],te=l[u+1][1];if(o>=h&&o<=$){var v=(te-w)/($-h),P=w-v*h;return v*o+P}}return 0}function Z(r){if(typeof parseInt(r)=="number"){var o=parseInt(r);if(o<360&&o>0)return[o,o]}if(typeof r=="string"){if(i[r]){var l=i[r];if(l.hueRange)return l.hueRange}else if(r.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var u=f(r)[0];return[u,u]}}return[0,360]}function ee(r){return j(r).saturationRange}function j(r){r>=334&&r<=360&&(r-=360);for(var o in i){var l=i[o];if(l.hueRange&&r>=l.hueRange[0]&&r<=l.hueRange[1])return i[o]}return"Color not found"}function q(r){if(c===null){var o=.618033988749895,l=Math.random();return l+=o,l%=1,Math.floor(r[0]+l*(r[1]+1-r[0]))}else{var u=r[1]||1,h=r[0]||0;c=(c*9301+49297)%233280;var w=c/233280;return Math.floor(h+w*(u-h))}}function V(r){var o=g(r);function l(h){var w=h.toString(16);return w.length==1?"0"+w:w}var u="#"+l(o[0])+l(o[1])+l(o[2]);return u}function R(r,o,l){var u=l[0][0],h=l[l.length-1][0],w=l[l.length-1][1],$=l[0][1];i[r]={hueRange:o,lowerBounds:l,saturationRange:[u,h],brightnessRange:[w,$]}}function se(){R("monochrome",null,[[0,0],[100,0]]),R("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),R("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),R("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),R("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),R("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),R("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),R("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function g(r){var o=r[0];o===0&&(o=1),o===360&&(o=359),o=o/360;var l=r[1]/100,u=r[2]/100,h=Math.floor(o*6),w=o*6-h,$=u*(1-l),te=u*(1-w*l),v=u*(1-(1-w)*l),P=256,k=256,K=256;switch(h){case 0:P=u,k=v,K=$;break;case 1:P=te,k=u,K=$;break;case 2:P=$,k=u,K=v;break;case 3:P=$,k=te,K=u;break;case 4:P=v,k=$,K=u;break;case 5:P=u,k=$,K=te;break}var be=[Math.floor(P*255),Math.floor(k*255),Math.floor(K*255)];return be}function f(r){r=r.replace(/^#/,""),r=r.length===3?r.replace(/(.)/g,"$1$1"):r;var o=parseInt(r.substr(0,2),16)/255,l=parseInt(r.substr(2,2),16)/255,u=parseInt(r.substr(4,2),16)/255,h=Math.max(o,l,u),w=h-Math.min(o,l,u),$=h?w/h:0;switch(h){case o:return[60*((l-u)/w%6)||0,$,h];case l:return[60*((u-o)/w+2)||0,$,h];case u:return[60*((o-l)/w+4)||0,$,h]}}function S(r){var o=r[0],l=r[1]/100,u=r[2]/100,h=(2-l)*u;return[o,Math.round(l*u/(h<1?h:2-h)*1e4)/100,h/2*100]}function E(r){for(var o=0,l=0;l!==r.length&&!(o>=Number.MAX_SAFE_INTEGER);l++)o+=r.charCodeAt(l);return o}function O(r){if(isNaN(r)){if(typeof r=="string"){if(i[r]){var l=i[r];if(l.hueRange)return l.hueRange}else if(r.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var u=f(r)[0];return j(u).hueRange}}}else{var o=parseInt(r);if(o<360&&o>0)return j(r).hueRange}return[0,360]}return b})}(Pe,Pe.exports)),Pe.exports}var br=vr(),yr=jt(br);function wr(n,a){let c="bright",i;return/water|ocean|lake|sea|river/.test(n)&&(i="blue"),/state|country|place/.test(n)&&(i="pink"),/road|highway|transport|streets/.test(n)&&(i="orange"),/contour|building|earth/.test(n)&&(i="monochrome"),/building/.test(n)&&(c="dark"),/earth/.test(n)&&(c="light"),/contour|landuse/.test(n)&&(i="yellow"),/wood|forest|park|landcover|land|natural/.test(n)&&(i="green"),`rgba(${yr({luminosity:c,hue:i,seed:n,format:"rgbArray"}).join(", ")}, ${a||"1"})`}var xr={brightColor:wr};function Sr(n){return n.metadata&&n.metadata["maplibregl-inspect:inspect"]}function Cr(n){return Object.assign(n,{metadata:Object.assign({},n.metadata,{"maplibregl-inspect:inspect":!0})})}class lt{constructor(a){if(this._onSourceChange=i=>{if(i.sourceDataType==="visibility"||!i.isSourceLoaded)return;const d=Object.assign({},this.sources);this._setSourcesFromMap(),!lr(d,this.sources)&&Object.keys(this.sources).length>0&&setTimeout(()=>this.render(),1e3)},this._onStyleChange=()=>{const i=this._map.getStyle();Sr(i)||(this._originalStyle=i)},this._onRightClick=()=>{!this.options.showMapPopupOnHover&&!this.options.showInspectMapPopupOnHover&&!this.options.blockHoverPopupOnClick&&this._popup&&this._popup.remove()},this._onMousemove=i=>{if(this._showInspectMap){if(!this.options.showInspectMapPopup||i.type==="mousemove"&&!this.options.showInspectMapPopupOnHover)return;i.type==="click"&&this.options.showInspectMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}else{if(!this.options.showMapPopup||i.type==="mousemove"&&!this.options.showMapPopupOnHover)return;i.type==="click"&&this.options.showMapPopupOnHover&&this.options.blockHoverPopupOnClick&&(this._popupBlocked=!this._popupBlocked)}if(!this._popupBlocked&&this._popup){let d;this.options.selectThreshold===0?d=i.point:d=[[i.point.x-this.options.selectThreshold,i.point.y+this.options.selectThreshold],[i.point.x+this.options.selectThreshold,i.point.y-this.options.selectThreshold]];const b=this._map.queryRenderedFeatures(d,this.options.queryParameters)||[];if(this._map.getCanvas().style.cursor=b.length?"pointer":"",!b.length)this._popup.remove();else{this._popup.setLngLat(i.lngLat);const _=this.options.renderPopup(b);typeof _=="string"?this._popup.setHTML(_):this._popup.setDOMContent(_),this._popup.addTo(this._map)}}},!(this instanceof lt))throw new Error("MaplibreInspect needs to be called with the new keyword");let c=null;window.maplibregl?c=new window.maplibregl.Popup({closeButton:!1,closeOnClick:!1}):a.popup||console.error("Maplibre GL JS can not be found. Make sure to include it or pass an initialized MaplibreGL Popup to MaplibreInspect if you are using moduleis."),this.options=Object.assign({showInspectMap:!1,showInspectButton:!0,showInspectMapPopup:!0,showMapPopup:!1,showMapPopupOnHover:!0,showInspectMapPopupOnHover:!0,blockHoverPopupOnClick:!1,backgroundColor:"#fff",assignLayerColor:xr.brightColor,buildInspectStyle:Pt.generateInspectStyle,renderPopup:mr,popup:c,selectThreshold:5,useInspectStyle:!0,queryParameters:{},sources:{},toggleCallback(){},manageStyleOutside:!1},a),this.sources=this.options.sources,this.assignLayerColor=this.options.assignLayerColor,this._popup=this.options.popup,this._popupBlocked=!1,this._showInspectMap=this.options.showInspectMap,this._toggle=new pr({show:this.options.showInspectButton,onToggle:()=>this.toggleInspector()})}toggleInspector(){this._showInspectMap=!this._showInspectMap,this._popupBlocked=!1,this.options.toggleCallback(this._showInspectMap),this.render()}_inspectStyle(){const a=Pt.generateColoredLayers(this.sources,this.assignLayerColor);return this.options.buildInspectStyle(this._map.getStyle(),a,{backgroundColor:this.options.backgroundColor})}render(){this._showInspectMap?(this.options.useInspectStyle&&this._map.setStyle(Cr(this._inspectStyle())),this._toggle.setMapIcon()):this._originalStyle&&(this._popup&&this._popup.remove(),this.options.useInspectStyle&&this._map.setStyle(this._originalStyle),this._toggle.setInspectIcon())}_setSourcesFromMap(){const a=Object.keys(this._map.getStyle().sources);Object.keys(this._map.style.sourceCaches).forEach(c=>{const i=this._map.style.sourceCaches[c]||{_source:{}},d=i._source.vectorLayerIds;d?this.sources[c]=d:i._source.type==="geojson"&&(this.sources[c]=[])}),Object.keys(this.sources).forEach(c=>{a.indexOf(c)===-1&&delete this.sources[c]})}setOriginalStyle(a){this._originalStyle=a,this._setSourcesFromMap()}onAdd(a){return this._map=a,Object.keys(this.sources).length===0&&(a.on("tiledata",this._onSourceChange),a.on("sourcedata",this._onSourceChange)),a.on("styledata",this._onStyleChange),a.on("load",this._onStyleChange),a.on("mousemove",this._onMousemove),a.on("click",this._onMousemove),a.on("contextmenu",this._onRightClick),this._toggle.elem}onRemove(){this._map.off("styledata",this._onStyleChange),this._map.off("load",this._onStyleChange),this._map.off("tiledata",this._onSourceChange),this._map.off("sourcedata",this._onSourceChange),this._map.off("mousemove",this._onMousemove),this._map.off("click",this._onMousemove),this._map.off("contextmenu",this._onRightClick);const a=this._toggle.elem;a.parentNode.removeChild(a),this._map=void 0}}var $r=B('<a class="underline text-purple"target=_blank rel=noreferrer> '),Tr=B("<div class=features-properties>"),Mr=B("<div><span><strong></strong><span> (<!>)</span></span><table><tbody><tr><td>id</td><td>"),Or=B("<tr><td></td><td>"),Ar=B('<div class="w-1/2 h-full w-full p-2 flex flex-col"><button type=button class=btn-primary>Copy to clipboard</button><textarea readonly class="text-xs font-mono p-2 border mt-4 w-full overflow-x-scroll overflow-y-scroll flex-1">'),Pr=B("<div class=hidden>"),Ir=B('<div class="h-full w-full flex">'),Lr=B('<div class="font-bold text-red"><a class=underline href=https://docs.protomaps.com/basemaps/downloads#current-version>See Docs.'),Er=B('<div class="absolute bottom-0 p-1 text-xs bg-white bg-opacity-50"> z@<div class="hidden lg:block font-bold">Drag .pmtiles here to view'),kr=B('<div class="absolute p-8 flex justify-center items-center bg-white bg-opacity-50 font-mono text-red">'),Br=B('<div class="flex-1 font-mono">Dropped file '),jr=B('<button class="btn-primary bg-gray text-black"type=button>close'),Rr=B('<input class="border-2 border-gray p-1 flex-1 text-xs lg:text-base"type=text name=tiles autocomplete=off>'),Nr=B("<button class=btn-primary type=submit>load"),Hr=B('<select><option value="">main'),Dr=B('<div class="flex flex-col h-dvh w-full"><div class="max-w-[1500px] mx-auto"><form class="flex space-x-2"><button class=btn-primary type=submit>fit bounds</button></form><div class="flex my-2 space-y-2 lg:space-y-0 space-x-2 flex-col lg:flex-row items-center"><div class="flex items-center"><label for=flavorName class="text-xs mr-1">flavor</label><select id=flavorName autocomplete=on><option value=light>light</option><option value=dark>dark</option><option value=white>data viz (white)</option><option value=grayscale>data viz (grayscale)</option><option value=black>data viz (black)</option></select></div><div class="flex items-center"><label for=lang class="text-xs mr-1">language</label><select id=lang autocomplete=on></select></div><div class="hidden lg:inline"><input id=localSprites type=checkbox><label for=localSprites class="text-xs ml-1">local sprites</label></div><div class="hidden lg:inline"><input id=showBoxes type=checkbox><label for=showBoxes class="text-xs ml-1">bboxes</label></div><button type=button class="btn-primary hidden lg:inline"></button></div></div><div class="h-full flex grow-1">'),Fr=B("<option> (<!>)"),zr=B("<button class=btn-primary type=button>style version"),Gr=B("<option>");const qr=5,Lt="https://demo-bucket.protomaps.com/v4.pmtiles",Vr='<a href="https://github.com/protomaps/basemaps">Protomaps</a> Â© <a href="https://openstreetmap.org">OpenStreetMap</a>';function Ur(n){return"source-layer"in n&&n["source-layer"]?n["source-layer"]:""}const Kr=n=>Number(BigInt(n)&(BigInt(1)<<BigInt(44))-BigInt(1)),Jr=n=>{const a=BigInt(n)>>BigInt(44)&BigInt(3);return a===BigInt(1)?"node":a===BigInt(2)?"way":a===BigInt(3)?"relation":"not_osm"},Wr=n=>{if(n){const a=Jr(n);if(a!=="not_osm"){const c=Kr(n);return(()=>{var i=$r(),d=i.firstChild;return tr(i,"href",`https://openstreetmap.org/${a}/${c}`),T(i,a,d),T(i,c,null),i})()}}return n},Zr=n=>(()=>{var a=Tr();return T(a,U(Ue,{get each(){return n.features},children:c=>(()=>{var i=Mr(),d=i.firstChild,b=d.firstChild,_=b.nextSibling,x=_.firstChild,M=x.nextSibling;M.nextSibling;var D=d.nextSibling,W=D.firstChild,Z=W.firstChild,ee=Z.firstChild,j=ee.nextSibling;return T(b,()=>Ur(c.layer)),T(_,()=>c.geometry.type,M),T(j,()=>Wr(c.id)),T(W,U(Ue,{get each(){return Object.entries(c.properties)},children:([q,V])=>(()=>{var R=Or(),se=R.firstChild,g=se.nextSibling;return T(se,q),T(g,V),R})()}),null),i})()})),a})();function at(n,a,c,i,d,b,_){const x={version:8,sources:{},layers:[]};if(!d||!i)return x;let M;return _?M=`pmtiles://${_.source.getKey()}`:er(d)?M=`pmtiles://${d}`:M=d,x.layers=[],a?x.sprite=`${location.protocol}//${location.host}/${c}`:x.sprite=`https://protomaps.github.io/basemaps-assets/sprites/v4/${c}`,x.glyphs="https://protomaps.github.io/basemaps-assets/fonts/{fontstack}/{range}.pbf",x.sources={protomaps:{type:"vector",attribution:Vr,url:M}},b&&b.length>0?x.layers=x.layers.concat(b):x.layers=x.layers.concat(sr("protomaps",i,{lang:n})),x}function Yr(n){const a=ot(()=>JSON.stringify(at(n.lang,!1,n.flavorName,n.flavor,n.tiles),null,4));return(()=>{var c=Ar(),i=c.firstChild,d=i.nextSibling;return i.$$click=()=>{navigator.clipboard.writeText(a())},T(d,a),c})()}function Xr(n){let a,c,i,d;const[b,_]=G(),[x,M]=G(),[D,W]=G(),[Z,ee]=G(0),[j,q]=G("");Xn(()=>{var r;if((r=n.ref)==null||r.call(n,{fit:R}),re.getRTLTextPluginStatus()==="unavailable"&&re.setRTLTextPlugin("https://unpkg.com/@mapbox/mapbox-gl-rtl-text@0.2.3/mapbox-gl-rtl-text.min.js",!0),!a){console.error("Could not mount map element");return}const g=new ir({metadata:!0});W(g),re.addProtocol("pmtiles",g.tile);const f=new re.Map({hash:"map",container:a,style:at("en",!1,n.flavorName,n.flavor),attributionControl:!1});f.addControl(new re.NavigationControl),f.addControl(new re.GlobeControl),f.addControl(new re.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,fitBoundsOptions:{animate:!1}})),f.addControl(new re.AttributionControl({compact:!1})),f.addControl(new lt({popup:new re.Popup({closeButton:!1,closeOnClick:!1})}));const S=new re.Popup({closeButton:!0,closeOnClick:!1,maxWidth:"none"});f.on("error",o=>{_(o.error.message)}),f.on("idle",()=>{ee(f.getZoom()),_(void 0),V().then(o=>{var l;if(o!=null&&o.metadata){const u=o.metadata;M(`tiles@${u.version} ${(l=u["planetiler:osm:osmosisreplicationtime"])==null?void 0:l.substr(0,10)}`)}})});const E=o=>{const l=f.queryRenderedFeatures(o.point);i&&l.length?(i.innerHTML="",kt(()=>U(Zr,{features:l}),i),S.setHTML(i.innerHTML),S.setLngLat(o.lngLat),S.addTo(f)):S.remove()};f.on("contextmenu",o=>{E(o)}),f.on("touchstart",o=>{d=setTimeout(()=>{E(o)},500)});const O=()=>{clearTimeout(d)};return f.on("zoom",o=>{ee(o.target.getZoom())}),f.on("touchend",O),f.on("touchcancel",O),f.on("touchmove",O),f.on("pointerdrag",O),f.on("pointermove",O),f.on("moveend",O),f.on("gesturestart",O),f.on("gesturechange",O),f.on("gestureend",O),c=f,()=>{W(void 0),re.removeProtocol("pmtiles"),f.remove()}});const V=async()=>{var f;if(!n.droppedArchive&&((f=n.tiles)!=null&&f.endsWith(".json"))){const E=await(await fetch(n.tiles)).json();return{metadata:E,bounds:[[E.bounds[0],E.bounds[1]],[E.bounds[2],E.bounds[3]]]}}const g=D();if(g){let S=n.droppedArchive;if(S?g.add(S):n.tiles&&(S=g.tiles.get(n.tiles),S||(S=new Bt(n.tiles),g.add(S))),S){const E=await S.getMetadata(),O=await S.getHeader();return{metadata:E,bounds:[[O.minLon,O.minLat],[O.maxLon,O.maxLat]]}}}},R=async()=>{var f;const g=(f=await V())==null?void 0:f.bounds;g&&(c==null||c.fitBounds(g,{animate:!1}))},se=ot(()=>at(n.lang,n.localSprites,n.flavorName,n.flavor,n.tiles,n.npmLayers,n.droppedArchive));return Ie(()=>{const g=n.npmVersion?+n.npmVersion.split(".")[0]:qr;V().then(f=>{if(f&&f.metadata instanceof Object&&"version"in f.metadata){const S=+f.metadata.version.split(".")[0];Qn[S].indexOf(g)<0?q(`style v${g} may not be compatible with tileset v${S}. `):q("")}})}),Ie(()=>{c&&(c.showTileBoundaries=n.showBoxes,c.showCollisionBoxes=n.showBoxes)}),Ie(()=>{c&&c.setStyle(se())}),[(()=>{var g=Pr(),f=i;return typeof f=="function"?Mt(f,g):i=g,g})(),(()=>{var g=Ir(),f=a;return typeof f=="function"?Mt(f,g):a=g,g})(),(()=>{var g=Er(),f=g.firstChild,S=f.nextSibling;return T(g,x,f),T(g,()=>Z().toFixed(2),S),T(g,U(xe,{get when(){return j()},get children(){var E=Lr(),O=E.firstChild;return T(E,j,O),E}}),null),g})(),U(xe,{get when(){return b()},get children(){var g=kr();return T(g,b),g}})]}function Qr(){const n=Jn(location.hash),[a,c]=G(n.flavorName||"light"),[i,d]=G(n.lang||"en"),[b,_]=G(n.tiles||Lt),[x,M]=G(n.local_sprites==="true"),[D,W]=G(n.show_boxes==="true"),[Z,ee]=G(!1),[j,q]=G(n.npm_version),[V,R]=G([]),[se,g]=G([]),[f,S]=G(),[E,O]=G();Ie(()=>{const v={flavorName:a(),lang:i(),tiles:f()||b()===Lt?void 0:b(),local_sprites:x()?"true":void 0,show_boxes:D()?"true":void 0,npm_version:j()?j():void 0};location.hash=Wn(location.hash,v)});const r=()=>rr(a()),o=v=>{v.preventDefault(),v.dataTransfer&&S(new Bt(new nr(v.dataTransfer.files[0])))},l=v=>(v.preventDefault(),!1),u=v=>{const P=v.charCode;P>=49&&P<=53&&c(["light","dark","white","grayscale","black"][P-49])},h=v=>{v.preventDefault();const k=new FormData(v.target).get("tiles");typeof k=="string"&&_(k)},w=async()=>{const P=await(await fetch("https://registry.npmjs.org/protomaps-themes-base",{headers:{Accept:"application/vnd.npm.install-v1+json"}})).json();R(Object.keys(P.versions).sort().filter(k=>+k.split(".")[0]>=2).reverse())};Ie(()=>{(async()=>{const v=j();g(v===void 0||v===""?[]:await Zn(v,a()))})()}),Ot.sort((v,P)=>v.full_name.localeCompare(P.full_name));const $=()=>{var v;(v=E())==null||v.fit()},te=()=>{S(void 0)};return(()=>{var v=Dr(),P=v.firstChild,k=P.firstChild,K=k.firstChild,be=k.nextSibling,Le=be.firstChild,Ke=Le.firstChild,Ee=Ke.nextSibling,ke=Le.nextSibling,Je=ke.firstChild,C=Je.nextSibling,Se=ke.nextSibling,Be=Se.firstChild,Y=Se.nextSibling,Ce=Y.firstChild,ye=Y.nextSibling,ce=P.nextSibling;return T(v,U(Yn,{page:0}),P),k.addEventListener("submit",h),T(k,U(xe,{get when(){return f()},get children(){return[(()=>{var y=Br();return y.firstChild,T(y,()=>{var F;return(F=f())==null?void 0:F.source.getKey()},null),y})(),(()=>{var y=jr();return y.$$click=te,y})()]}}),K),T(k,U(xe,{get when(){return!f()},get children(){return[(()=>{var y=Rr();return ve(()=>y.value=b()),y})(),Nr()]}}),K),K.$$click=$,Ee.addEventListener("change",y=>c(y.target.value)),C.addEventListener("change",y=>d(y.target.value)),T(C,U(Ue,{each:Ot,children:y=>(()=>{var F=Fr(),ae=F.firstChild,je=ae.nextSibling;return je.nextSibling,T(F,()=>y.lang,ae),T(F,()=>y.full_name,je),ve(()=>F.value=y.lang),F})()})),Be.addEventListener("change",y=>M(y.currentTarget.checked)),Ce.addEventListener("change",y=>W(y.currentTarget.checked)),T(be,U(xe,{get when(){return V().length>0},get fallback(){return(()=>{var y=zr();return y.$$click=w,y})()},get children(){var y=Hr();return y.firstChild,y.addEventListener("change",F=>q(F.target.value)),T(y,U(Ue,{get each(){return V()},children:F=>(()=>{var ae=Gr();return ae.value=F,T(ae,F),ae})()}),null),ve(()=>y.value=j()),y}}),ye),ye.$$click=()=>ee(!Z()),T(ye,()=>Z()?"Close style JSON":"Get style JSON"),ce.addEventListener("drop",o),ce.addEventListener("dragover",l),ce.addEventListener("keypress",u),T(ce,U(Xr,{ref:O,get tiles(){return b()},get localSprites(){return x()},get showBoxes(){return D()},get flavorName(){return a()},get flavor(){return r()},get lang(){return i()},get npmLayers(){return se()},get npmVersion(){return j()},get droppedArchive(){return f()}}),null),T(ce,U(xe,{get when(){return Z()},get children(){return U(Yr,{get flavorName(){return a()},get flavor(){return r()},get lang(){return i()},get tiles(){return ot(()=>!!f())()?"example.pmtiles":b()}})}}),null),ve(()=>Ee.value=a()),ve(()=>C.value=i()),ve(()=>Be.checked=x()),ve(()=>Ce.checked=D()),v})()}const Et=document.getElementById("root");Et&&kt(()=>U(Qr,{}),Et);Kn(["click"]);
